# Gu√≠a Completa de API para Postman - ComercioRealPlus

## Configuraci√≥n Base

### URL Base
```
http://localhost:8000/api/v1/
```

### Headers Comunes
```
Content-Type: application/json
Accept: application/json
```

---

## üîê Autenticaci√≥n

### 1. Login (Obtener Token)
```
POST http://localhost:8000/api/v1/login
Headers:
  Content-Type: application/json

Body:
{
  "email": "admin@example.com",
  "password": "your_admin_password"
}
```

### 2. Registro
```
POST http://localhost:8000/api/v1/register
Headers:
  Content-Type: application/json

Body:
{
  "name": "Nuevo Usuario",
  "email": "nuevo@example.com",
  "password": "your_secure_password",
  "password_confirmation": "your_secure_password",
  "role_id": 2
}
```

### 3. Perfil de Usuario (Requiere Token)
```
GET http://localhost:8000/api/v1/me
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### 4. Logout
```
POST http://localhost:8000/api/v1/logout
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üë§ Usuarios (Requieren Token)

### Listar Usuarios
```
GET http://localhost:8000/api/v1/users
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Usuario
```
POST http://localhost:8000/api/v1/users
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "name": "Usuario Ejemplo",
  "email": "usuario@example.com",
  "password": "your_secure_password",
  "role_id": 2
}
```

### Ver Usuario Espec√≠fico
```
GET http://localhost:8000/api/v1/users/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Actualizar Usuario
```
PUT http://localhost:8000/api/v1/users/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "name": "Nombre Actualizado"
}
```

### Eliminar Usuario
```
DELETE http://localhost:8000/api/v1/users/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üè™ Tiendas (Requieren Token)

### Listar Tiendas
```
GET http://localhost:8000/api/v1/stores
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Tienda (con archivos)
```
POST http://localhost:8000/api/v1/stores
Headers:
  Authorization: Bearer {token}
  Content-Type: multipart/form-data

Form Data:
- name: Mi Tienda
- slug: mi-tienda
- description: Descripci√≥n de la tienda
- logo: (seleccionar archivo)
- cover: (seleccionar archivo)
- primary_color: #FF6000
- text_color: #333333
- button_color: #FF6000
- background_color: #FFFFFF
- direccion: Direcci√≥n de la tienda
- telefono: 1234567890
- categoria_principal: Categor√≠a Principal
```

### Ver Tienda Espec√≠fica
```
GET http://localhost:8000/api/v1/stores/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Actualizar Tienda
```
PUT http://localhost:8000/api/v1/stores/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: multipart/form-data

Form Data:
- name: Nombre Actualizado
- logo: (seleccionar archivo - opcional)
```

### Eliminar Tienda
```
DELETE http://localhost:8000/api/v1/stores/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üì¶ Productos (Requieren Token)

### Listar Productos
```
GET http://localhost:8000/api/v1/products
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Producto
```
POST http://localhost:8000/api/v1/products
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "name": "Producto Ejemplo",
  "price": 99.99,
  "description": "Descripci√≥n del producto",
  "store_id": 1,
  "category_id": 1
}
```

### Ver Producto Espec√≠fico
```
GET http://localhost:8000/api/v1/products/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Actualizar Producto
```
PUT http://localhost:8000/api/v1/products/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "price": 120.50
}
```

### Eliminar Producto
```
DELETE http://localhost:8000/api/v1/products/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üìÇ Categor√≠as (Requieren Token)

### Listar Categor√≠as
```
GET http://localhost:8000/api/v1/categories
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Categor√≠a
```
POST http://localhost:8000/api/v1/categories
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "name": "Categor√≠a Ejemplo",
  "store_id": 1
}
```

### Ver Categor√≠a Espec√≠fica
```
GET http://localhost:8000/api/v1/categories/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Actualizar Categor√≠a
```
PUT http://localhost:8000/api/v1/categories/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "name": "Categor√≠a Actualizada"
}
```

### Eliminar Categor√≠a
```
DELETE http://localhost:8000/api/v1/categories/{id}
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üåê Endpoints P√∫blicos (Sin Token)

### Listar Tiendas P√∫blicas
```
GET http://localhost:8000/api/v1/public-stores
Headers:
  Content-Type: application/json
```

### Ver Tienda P√∫blica por Slug
```
GET http://localhost:8000/api/v1/public-stores/{slug}
Headers:
  Content-Type: application/json
```

### Health Check
```
GET http://localhost:8000/api/ping
Headers:
  Content-Type: application/json
```

---

## üîç Par√°metros de Consulta Avanzados

### Incluir Relaciones
```
?included=relacion1,relacion2,relacion3
```

### Filtrar por Campos
```
?filter[campo]=valor
```

### Ordenar Resultados
```
?sort=campo          # Ascendente
?sort=-campo         # Descendente
```

### Paginaci√≥n
```
?page=1&per_page=10
```

---

## üìã Ejemplos Pr√°cticos con Par√°metros

### 1. Usuarios con sus productos y roles
```
GET http://localhost:8000/api/v1/users?included=products,roles
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### 2. Productos con tienda y categor√≠a, filtrados por precio
```
GET http://localhost:8000/api/v1/products?included=store,category&filter[price]=100&sort=-created_at&page=1&per_page=5
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### 3. Tiendas con productos, ordenadas por nombre
```
GET http://localhost:8000/api/v1/stores?included=products&sort=name
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### 4. Categor√≠as con productos, paginadas
```
GET http://localhost:8000/api/v1/categories?included=products&page=2&per_page=10
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

---

## üõí Carritos y √ìrdenes (Requieren Token)

### Listar Carritos
```
GET http://localhost:8000/api/v1/carts
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Carrito
```
POST http://localhost:8000/api/v1/carts
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "user_id": 1
}
```

### Listar √ìrdenes
```
GET http://localhost:8000/api/v1/orders
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json
```

### Crear Orden
```
POST http://localhost:8000/api/v1/orders
Headers:
  Authorization: Bearer {token}
  Content-Type: application/json

Body:
{
  "user_id": 1,
  "total": 250.75,
  "status": "pending"
}
```

---

## üö® Soluci√≥n de Problemas Comunes

### Error 401 (No autorizado)
- Verificar que el token sea v√°lido
- Asegurar que el header Authorization est√© correcto

### Error 404 (No encontrado)
- Verificar que la ruta exista (todas las rutas API empiezan con `/api/v1/`)
- Confirmar que el ID del recurso exista

### Error 422 (Validaci√≥n fallida)
- Revisar los datos enviados en el body
- Verificar campos requeridos y formatos

### Error 405 (M√©todo no permitido)
- Verificar que el m√©todo HTTP sea correcto (GET, POST, PUT, DELETE)

### Error 500 (Error interno)
- Revisar logs de Laravel en `storage/logs/laravel.log`

---

## üí° Consejos para Postman

1. **Variables de Entorno**: Crea variables para `base_url` y `token`
2. **Colecciones**: Organiza las requests en colecciones por recurso
3. **Tests**: Agrega tests autom√°ticos para verificar respuestas
4. **Pre-request Scripts**: Configura headers autom√°ticamente
5. **Documentaci√≥n**: Exporta la colecci√≥n con documentaci√≥n

---

## üîÑ Flujo de Trabajo Recomendado

1. **Login** ‚Üí Obtener token
2. **Guardar token** ‚Üí En variable de entorno
3. **Realizar requests** ‚Üí Con token en headers
4. **Logout** ‚Üí Cuando termines

Esta gu√≠a te permitir√° probar todos los endpoints API correctamente en Postman. Si encuentras alg√∫n error espec√≠fico, comparte el mensaje de error para ayudarte a resolverlo.
