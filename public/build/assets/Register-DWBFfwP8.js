import{f as g,x,c as a,o as n,a as o,m as h,i as d,t as u,n as m,v as c,B as k,d as b,b as _,w as C,u as V}from"./app-D3_-grU_.js";import{u as z}from"./auth-qzTI82vx.js";import{R as q}from"./vue-router-BK4ol-iN.js";const E={class:"min-h-screen bg-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},N={class:"max-w-md w-full space-y-8"},P={key:0,class:"p-3 bg-red-100 border border-red-400 text-red-700 rounded text-sm"},U={key:0,class:"mt-1 text-sm text-red-600"},B={key:0,class:"mt-1 text-sm text-red-600"},I={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},S={key:0,class:"mt-1 text-sm text-red-600"},M=["disabled"],T={key:0},j={key:1},D={class:"text-center"},A={class:"text-sm text-gray-300"},Y={__name:"Register",setup(F){const y=z(),p=g(null),r=x({name:"",email:"",password:"",password_confirmation:"",role:"cliente",profile_photo:null}),t=x({name:null,email:null,password:null,password_confirmation:null,role:null,profile_photo:null}),i=g(""),f=g(!1),w=async()=>{v(),i.value="",f.value=!0,p.value&&p.value.files.length>0&&(r.profile_photo=p.value.files[0]);try{await y.register(r.name,r.email,r.password,r.password_confirmation,r.role,r.profile_photo),window.location.href="/login"}catch(l){if(f.value=!1,l.response&&l.response.data&&l.response.data.errors){const e=l.response.data.errors;for(const s in e)t.hasOwnProperty(s)&&(t[s]=e[s][0])}else l.response&&l.response.data&&l.response.data.message?i.value=l.response.data.message:i.value="Error en el registro. Inténtalo de nuevo."}},v=()=>{t.name=null,t.email=null,t.password=null,t.password_confirmation=null,t.role=null,t.profile_photo=null,i.value=""};return(l,e)=>(n(),a("div",E,[o("div",N,[e[14]||(e[14]=o("div",null,[o("h2",{class:"mt-6 text-center text-3xl font-bold text-orange-500"},"Crear cuenta ComercioPlus"),o("p",{class:"mt-2 text-center text-sm text-gray-300"},"Regístrate para comenzar")],-1)),o("form",{onSubmit:h(w,["prevent"]),class:"mt-8 space-y-6 bg-gray-800 rounded-lg p-6",enctype:"multipart/form-data"},[i.value?(n(),a("div",P,u(i.value),1)):d("",!0),o("div",null,[e[5]||(e[5]=o("label",{for:"name",class:"block text-sm font-medium text-gray-300"},"Nombre completo",-1)),m(o("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>r.name=s),type:"text",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 bg-white sm:text-sm",placeholder:"Juan Pérez"},null,512),[[c,r.name]]),t.name?(n(),a("p",U,u(t.name),1)):d("",!0)]),o("div",null,[e[6]||(e[6]=o("label",{for:"email",class:"block text-sm font-medium text-gray-300"},"Correo electrónico",-1)),m(o("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>r.email=s),type:"email",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 bg-white sm:text-sm",placeholder:"tu@email.com"},null,512),[[c,r.email]]),t.email?(n(),a("p",B,u(t.email),1)):d("",!0)]),o("div",null,[e[7]||(e[7]=o("label",{for:"password",class:"block text-sm font-medium text-gray-300"},"Contraseña",-1)),m(o("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=s=>r.password=s),type:"password",required:"",minlength:"8",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 bg-white sm:text-sm",placeholder:"••••••••"},null,512),[[c,r.password]]),t.password?(n(),a("p",I,u(t.password),1)):d("",!0)]),o("div",null,[e[8]||(e[8]=o("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-300"},"Confirmar contraseña",-1)),m(o("input",{id:"password_confirmation","onUpdate:modelValue":e[3]||(e[3]=s=>r.password_confirmation=s),type:"password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 bg-white sm:text-sm",placeholder:"••••••••"},null,512),[[c,r.password_confirmation]])]),o("div",null,[e[10]||(e[10]=o("label",{for:"role",class:"block text-sm font-medium text-gray-300"},"Tipo de cuenta",-1)),m(o("select",{id:"role","onUpdate:modelValue":e[4]||(e[4]=s=>r.role=s),required:"",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-600 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm"},[...e[9]||(e[9]=[o("option",{value:"cliente"},"Cliente comprador",-1),o("option",{value:"comerciante"},"Comerciante",-1)])],512),[[k,r.role]]),t.role?(n(),a("p",R,u(t.role),1)):d("",!0)]),o("div",null,[e[11]||(e[11]=o("label",{for:"profile_photo",class:"block text-sm font-medium text-gray-300"},"Foto de perfil (opcional)",-1)),o("input",{id:"profile_photo",ref_key:"profilePhotoInput",ref:p,type:"file",accept:"image/*",class:"mt-1 block w-full text-sm text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"},null,512),t.profile_photo?(n(),a("p",S,u(t.profile_photo),1)):d("",!0)]),o("div",null,[o("button",{type:"submit",disabled:f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50"},[f.value?(n(),a("span",T,"Creando cuenta...")):(n(),a("span",j,"Crear cuenta"))],8,M)]),o("div",D,[o("p",A,[e[13]||(e[13]=b(" ¿Ya tienes cuenta? ",-1)),_(V(q),{to:"/login",class:"font-medium text-orange-500 hover:text-orange-400 ml-1"},{default:C(()=>[...e[12]||(e[12]=[b("Inicia sesión",-1)])]),_:1})])])],32)])]))}};export{Y as default};
